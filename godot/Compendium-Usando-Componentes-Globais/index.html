<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=N4duVc9C58uwPiY8_59Fz_5Jgr8ufe5A6KahQF76Xmg');ul.lst-kix_2mdk31y4xjo0-5{list-style-type:none}ul.lst-kix_2mdk31y4xjo0-6{list-style-type:none}ul.lst-kix_2mdk31y4xjo0-3{list-style-type:none}ul.lst-kix_2mdk31y4xjo0-4{list-style-type:none}ul.lst-kix_2mdk31y4xjo0-7{list-style-type:none}ul.lst-kix_2mdk31y4xjo0-8{list-style-type:none}ul.lst-kix_2mdk31y4xjo0-1{list-style-type:none}.lst-kix_2mdk31y4xjo0-2>li:before{content:"-  "}ul.lst-kix_2mdk31y4xjo0-2{list-style-type:none}ul.lst-kix_2mdk31y4xjo0-0{list-style-type:none}.lst-kix_ijoypide99jf-2>li:before{content:"\0025a0  "}ul.lst-kix_6z34iw7eprho-4{list-style-type:none}.lst-kix_6z34iw7eprho-8>li:before{content:"-  "}ul.lst-kix_6z34iw7eprho-3{list-style-type:none}.lst-kix_2mdk31y4xjo0-3>li:before{content:"-  "}.lst-kix_2mdk31y4xjo0-4>li:before{content:"-  "}.lst-kix_ijoypide99jf-1>li:before{content:"\0025cb  "}.lst-kix_ijoypide99jf-3>li:before{content:"\0025cf  "}ul.lst-kix_6z34iw7eprho-6{list-style-type:none}ul.lst-kix_6z34iw7eprho-5{list-style-type:none}ul.lst-kix_6z34iw7eprho-0{list-style-type:none}.lst-kix_2mdk31y4xjo0-1>li:before{content:"-  "}.lst-kix_2mdk31y4xjo0-5>li:before{content:"-  "}ul.lst-kix_6z34iw7eprho-2{list-style-type:none}.lst-kix_6z34iw7eprho-5>li:before{content:"-  "}ul.lst-kix_6z34iw7eprho-1{list-style-type:none}.lst-kix_ijoypide99jf-6>li:before{content:"\0025cf  "}.lst-kix_6z34iw7eprho-4>li:before{content:"-  "}.lst-kix_2mdk31y4xjo0-7>li:before{content:"-  "}.lst-kix_2mdk31y4xjo0-0>li:before{content:"-  "}.lst-kix_ijoypide99jf-5>li:before{content:"\0025a0  "}.lst-kix_ijoypide99jf-4>li:before{content:"\0025cb  "}.lst-kix_6z34iw7eprho-2>li:before{content:"-  "}.lst-kix_6z34iw7eprho-3>li:before{content:"-  "}.lst-kix_2mdk31y4xjo0-6>li:before{content:"-  "}.lst-kix_6z34iw7eprho-0>li:before{content:"-  "}.lst-kix_6z34iw7eprho-1>li:before{content:"-  "}.lst-kix_2mdk31y4xjo0-8>li:before{content:"-  "}.lst-kix_ijoypide99jf-0>li:before{content:"\0025cf  "}ul.lst-kix_6z34iw7eprho-8{list-style-type:none}ul.lst-kix_6z34iw7eprho-7{list-style-type:none}ul.lst-kix_ijoypide99jf-8{list-style-type:none}ul.lst-kix_ijoypide99jf-7{list-style-type:none}ul.lst-kix_ijoypide99jf-6{list-style-type:none}ul.lst-kix_ijoypide99jf-5{list-style-type:none}ul.lst-kix_ijoypide99jf-4{list-style-type:none}ul.lst-kix_ijoypide99jf-3{list-style-type:none}ul.lst-kix_ijoypide99jf-2{list-style-type:none}ul.lst-kix_ijoypide99jf-1{list-style-type:none}ul.lst-kix_ijoypide99jf-0{list-style-type:none}.lst-kix_ijoypide99jf-7>li:before{content:"\0025cb  "}.lst-kix_ijoypide99jf-8>li:before{content:"\0025a0  "}.lst-kix_6z34iw7eprho-6>li:before{content:"-  "}.lst-kix_6z34iw7eprho-7>li:before{content:"-  "}ol{margin:0;padding:0}table td,table th{padding:0}.c16{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.c1{color:#cccccc;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:italic}.c2{color:#cccccc;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c6{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c9{color:#ffffff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c4{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:justify}.c10{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c15{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial"}.c7{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c20{color:#ee5720;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Roboto Mono"}.c12{color:#ffffff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial"}.c19{font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial"}.c22{font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial"}.c8{text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c23{font-family:"Roboto Mono";color:#ee5720;font-weight:700}.c24{background-color:#0c1013;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c21{padding:0;margin:0}.c11{margin-left:36pt;padding-left:0pt}.c18{color:#000000;font-weight:400}.c0{color:#cccccc;font-weight:700}.c13{height:11pt}.c17{text-indent:36pt}.c3{color:#cccccc}.c14{font-style:normal}.c5{font-style:italic}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c24"><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 188.00px; height: 88.00px;"><img alt="" src="images/image36.png" style="width: 188.00px; height: 88.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 20.00px; height: 69.50px;"><img alt="" src="images/image5.png" style="width: 25.00px; height: 69.50px; margin-left: -5.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c4"><span class="c8 c0">Com esse documento voc&ecirc; vai aprender a trabalhar com componentes globais dentro do Godot. Com eles &eacute; poss&iacute;vel salvar dados e repassar esses valores para outras cenas, mesmo se ela for reiniciada por exemplo.</span></p><h1 class="c16" id="h.k5kyp94zprwc"><span class="c14 c20">Criando Scripts Globais</span></h1><p class="c4"><span class="c3 c14 c19">Os scripts globais s&atilde;o fundamentais para que dados sejam salvos e repassados para outras cenas no Godot. Pense em um simples exemplo: O personagem principal de um jogo coletou na primeira fase algumas moedas, e com elas &eacute; poss&iacute;vel comprar itens em uma outra fase. Ent&atilde;o na fase atual em que o personagem se encontra deve ser salvo a quantidade de moedas que ele possui antes de mudar de fase, sen&atilde;o tudo ser&aacute; perdido.</span></p><p class="c4 c13 c17"><span class="c9"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 480.50px; height: 270.58px;"><img alt="" src="images/image4.png" style="width: 480.50px; height: 270.58px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c1">Funcionamento de um script global.</span></p><p class="c7 c13"><span class="c5 c12"></span></p><p class="c4"><span class="c3">Para criar um script global, podemos ir at&eacute; a aba </span><span class="c0">FileSystem </span><span class="c3">e com o bot&atilde;o direito do mouse criar uma pasta para armazenar o script. Depois novamente com o bot&atilde;o direito dentro da pasta criada basta inserir um novo script. Apenas o renomeie para </span><span class="c0">Script Global</span><span class="c2">.</span></p><p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 346.67px;"><img alt="" src="images/image10.gif" style="width: 602.00px; height: 346.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c1">O Script Global deve ficar armazenado em uma pasta separada.</span></p><p class="c7 c13"><span class="c1"></span></p><p class="c4"><span class="c3">&Eacute; importante informar que o Script Global n&atilde;o fica atrelado a nenhum node. Ele apenas existe no projeto como um arquivo separado dos demais, guardando as informa&ccedil;&otilde;es que forem necess&aacute;rias. Mas depois de t&ecirc;-lo criado, precisamos ativ&aacute;-lo dentro do projeto. Para isso basta ir at&eacute; o menu </span><span class="c0">Project &gt; Project Settings</span><span class="c3">. Na janela que aparecer basta selecionar a guia </span><span class="c0">AutoLoad</span><span class="c2">.</span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 594.00px; height: 127.00px;"><img alt="" src="images/image7.png" style="width: 594.00px; height: 127.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c4"><span class="c3">Na op&ccedil;&atilde;o </span><span class="c0">Path </span><span class="c3">selecionamos o script a ser utilizado como Global. Se quiser pode depois mudar o nome desse AutoLoad em</span><span class="c0">&nbsp;Node Name</span><span class="c3">, mas n&atilde;o &eacute; necess&aacute;rio. Clique apenas em </span><span class="c0">ADD </span><span class="c2">e pronto! O Script Global est&aacute; ativado dentro do projeto.</span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 93.33px;"><img alt="" src="images/image8.png" style="width: 602.00px; height: 93.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h1 class="c16" id="h.tx2dkip4olpl"><span class="c23">Utilizando os Scripts Globais</span></h1><p class="c4"><span class="c2">Vamos por agora o Script Global para trabalhar. Nesse exemplo ser&aacute; constru&iacute;do um sistema de Hi-Score (Pontua&ccedil;&atilde;o M&aacute;xima) que vai conter:</span></p><ul class="c21 lst-kix_2mdk31y4xjo0-0 start"><li class="c4 c11"><span class="c0 c8">Nome do Jogador e;</span></li><li class="c4 c11"><span class="c8 c0">Pontua&ccedil;&atilde;o M&aacute;xima.</span></li></ul><p class="c6"><span class="c2"></span></p><p class="c4"><span class="c3">Antes precisamos inserir essas informa&ccedil;&otilde;es dentro do Script Global sendo cada uma como vari&aacute;vel. Ele apenas receber&aacute; valores, ou seja, apenas vari&aacute;veis ser&atilde;o adicionadas dentro dele. </span><span class="c3 c5">playerName </span><span class="c3">recebe o nome do jogador; </span><span class="c3 c5">actualChampion </span><span class="c3">recebe o recordista atual e o </span><span class="c3 c5">hiScore </span><span class="c2">recebe a pontua&ccedil;&atilde;o m&aacute;xima obtida at&eacute; o momento.</span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 259.00px; height: 99.00px;"><img alt="" src="images/image12.png" style="width: 259.00px; height: 99.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c8 c18"></span></p><p class="c4"><span class="c3">Agora precisamos acessar e modificar essas vari&aacute;veis com um outro script. Nesse exemplo, dentro da cena do menu, vamos adicionar um script que recebe o nome do jogador e automaticamente o salva na vari&aacute;vel global </span><span class="c3 c5">playerName </span><span class="c3">quando o bot&atilde;o Play for pressionado. Lembre-se de criar o novo script no node ra&iacute;z da cena ( </span><span class="c0">Veja o Compendium - Criando Menus caso tenha d&uacute;vidas</span><span class="c2">&nbsp;):</span></p><p class="c4 c13"><span class="c2"></span></p><p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 175.71px; height: 236.50px;"><img alt="" src="images/image23.png" style="width: 175.71px; height: 236.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 417.22px; height: 253.50px;"><img alt="" src="images/image18.png" style="width: 417.22px; height: 253.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c1">Print da aba scene com o nome e o tipo do node utilizados para o menu.</span></p><p class="c7 c13"><span class="c1"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 539.00px; height: 310.92px;"><img alt="" src="images/image35.gif" style="width: 539.00px; height: 310.92px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c1">Deve ser inserido o signal &ldquo;pressed()&rdquo; do bot&atilde;o dentro do script ra&iacute;z.</span></p><p class="c6"><span class="c1"></span></p><p class="c4"><span class="c3">No script ra&iacute;z da cena deve ser chamado dentro da fun&ccedil;&atilde;o </span><span class="c3 c5">pressed</span><span class="c2">() al&eacute;m da mudan&ccedil;a de cena a vari&aacute;vel global para que seja salvo o texto inserido na caixa de edi&ccedil;&atilde;o. Basta identificar o nome do Script Global e por fim identificar o nome da vari&aacute;vel que vai receber o valor:</span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 560.00px; height: 104.00px;"><img alt="" src="images/image17.png" style="width: 560.00px; height: 104.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c4"><span class="c3">Tamb&eacute;m &eacute; necess&aacute;rio fazer com que assim que a cena menu seja novamente aberta, o texto de Hi-Score seja atualizado com o nome e valor do score m&aacute;ximo atual. Podemos utilizar a fun&ccedil;&atilde;o </span><span class="c3 c5">_ready</span><span class="c3">() para realizar essa a&ccedil;&atilde;o. Chamamos o node respons&aacute;vel pelo texto (Label) e depois seu atributo (text) para alterarmos. O </span><span class="c3 c5">str</span><span class="c2">() &eacute; uma fun&ccedil;&atilde;o que converte dados para string, ou seja, caracteres. Podemos concatenar com outras strings utilizando v&iacute;rgula e aspas duplas.</span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 57.33px;"><img alt="" src="images/image33.png" style="width: 602.00px; height: 57.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c4"><span class="c2">Na cena do jogo, precisamos fazer apenas que a pontua&ccedil;&atilde;o seja salva. Nesse exemplo o personagem coleta algumas moedas na fase e aumenta a sua pontua&ccedil;&atilde;o. Antes &eacute; necess&aacute;rio que seja criado a cena da moeda:</span></p><p class="c6"><span class="c2"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 391.00px; height: 226.00px;"><img alt="" src="images/image11.png" style="width: 391.00px; height: 226.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c4"><span class="c3">Depois deve ser inserido no node raiz (</span><span class="c3 c5">Area2D</span><span class="c3">) um script. Basta selecionar o node e clicar em </span><span class="c3 c5">Attach New Script</span><span class="c2">:</span></p><p class="c6"><span class="c2"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 243.00px; height: 275.00px;"><img alt="" src="images/image39.png" style="width: 243.00px; height: 275.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c8 c0"></span></p><p class="c4"><span class="c3">Com o script criado, &eacute; importante passar o signal de colis&atilde;o com o personagem. Para isso basta ir at&eacute; a guia </span><span class="c0">Node &gt; Signals</span><span class="c3">. L&aacute; adicionamos o signal de </span><span class="c3 c5">body_entered </span><span class="c2">ao c&oacute;digo:</span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 564.62px; height: 326.50px;"><img alt="" src="images/image21.gif" style="width: 564.62px; height: 326.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c4"><span class="c3">Agora dentro da fun&ccedil;&atilde;o basta comparar se o corpo que colidiu pertence ao personagem. Podemos inserir um grupo a ele e utiliz&aacute;-lo para esse fim indo at&eacute; sua cena e depois em </span><span class="c8 c0">Node &gt; Groups:</span></p><p class="c4 c13"><span class="c2"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 171.50px; height: 151.39px;"><img alt="" src="images/image32.png" style="width: 171.50px; height: 151.39px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 232.00px; height: 171.00px;"><img alt="" src="images/image1.png" style="width: 232.00px; height: 171.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 181.46px; height: 152.50px;"><img alt="" src="images/image9.png" style="width: 181.46px; height: 152.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c1">Perceba que aparece um &iacute;cone quando &eacute; adicionado um grupo ao node.</span></p><p class="c7 c13"><span class="c1"></span></p><p class="c10"><span class="c2">J&aacute; aproveitando que estamos na cena do personagem, vamos adicionar uma fun&ccedil;&atilde;o no seu script que ser&aacute; chamada toda vez que o personagem colidir com a moeda. Essa fun&ccedil;&atilde;o vai adicionar sempre &nbsp;+1 em uma vari&aacute;vel criada dentro do c&oacute;digo respons&aacute;vel pela pontua&ccedil;&atilde;o do jogo:</span></p><p class="c6"><span class="c2"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 257.00px; height: 43.00px;"><img alt="" src="images/image31.png" style="width: 257.00px; height: 43.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 224.50px; height: 42.03px;"><img alt="" src="images/image13.png" style="width: 224.50px; height: 42.03px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c1">Criamos uma vari&aacute;vel dentro do c&oacute;digo do personagem, e depois criamos uma fun&ccedil;&atilde;o que soma sempre +1 &agrave; vari&aacute;vel criada.</span></p><p class="c7 c13"><span class="c1"></span></p><p class="c4"><span class="c2">Com esse grupo, no script da moeda, vamos criar a compara&ccedil;&atilde;o se colidimos com o grupo do &ldquo;Player&rdquo;. Depois basta chamar a fun&ccedil;&atilde;o que est&aacute; dentro do personagem e destruir a moeda:</span></p><p class="c4 c13"><span class="c2"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 104.00px;"><img alt="" src="images/image3.png" style="width: 602.00px; height: 104.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c1">A fun&ccedil;&atilde;o is_in_group() compara se o body (corpo) colidido pertence a um certo grupo. J&aacute; o queue_free() o destr&oacute;i.</span></p><p class="c7 c13"><span class="c2"></span></p><p class="c7 c13"><span class="c2"></span></p><p class="c4"><span class="c2">Depois adicione um node vazio para agrupar as moedas e adicion&aacute;-las na cena principal do jogo:</span></p><p class="c4 c13"><span class="c2"></span></p><p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 181.51px; height: 418.50px;"><img alt="" src="images/image27.png" style="width: 181.51px; height: 418.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 409.50px; height: 256.57px;"><img alt="" src="images/image19.png" style="width: 409.50px; height: 256.57px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c3 c5">Um Node2D vazio &eacute; &uacute;til para agrupar v&aacute;rios objetos dentro dele.</span></p><p class="c4 c13"><span class="c2"></span></p><p class="c4"><span class="c3">Podemos ainda fazer com que algum node de texto mostre para o jogador na tela principal do jogo o placar. Basta criar um node </span><span class="c3 c5">CanvasLayer </span><span class="c3">e </span><span class="c3 c5">Label </span><span class="c3">e depois</span><span class="c3 c5">&nbsp;</span><span class="c2">renome&aacute;-los . Dessa forma aonde o personagem for instanciado, o placar o acompanha:</span></p><p class="c4 c13"><span class="c2"></span></p><p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 218.00px; height: 59.00px;"><img alt="" src="images/image15.png" style="width: 218.00px; height: 59.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 364.50px; height: 215.62px;"><img alt="" src="images/image24.png" style="width: 364.50px; height: 215.62px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c1">Cena do personagem com placar.</span></p><p class="c7 c13"><span class="c1"></span></p><p class="c4"><span class="c3">No script do personagem, basta atualizar o texto do placar toda vez que a moeda for coletada. Podemos fazer isso dentro da fun&ccedil;&atilde;o </span><span class="c3 c5">updateScore</span><span class="c2">() que foi criado anteriormente tamb&eacute;m:</span></p><p class="c4 c13"><span class="c2"></span></p><p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 582.00px; height: 65.00px;"><img alt="" src="images/image30.png" style="width: 582.00px; height: 65.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c4"><span class="c2">&nbsp;</span></p><p class="c4"><span class="c2">Agora vem a parte final: programar para o jogador voltar ao menu principal e registrar o recorde caso ele tenha batido. Nesse exemplo foi criado um portal que faz o personagem voltar ao menu:</span></p><p class="c4 c13"><span class="c2"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 239.00px; height: 161.00px;"><img alt="" src="images/image25.png" style="width: 239.00px; height: 161.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 221.00px; height: 173.37px;"><img alt="" src="images/image34.png" style="width: 221.00px; height: 173.37px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span class="c3">Tamb&eacute;m foi adicionado um script e um signal de </span><span class="c3 c5">body_entered </span><span class="c2">a ele:</span></p><p class="c6"><span class="c2"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 275.00px; height: 342.00px;"><img alt="" src="images/image20.png" style="width: 275.00px; height: 342.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span class="c2">Dentro do script foi feito a mesma condi&ccedil;&atilde;o que a da moeda. A diferen&ccedil;a &eacute; que dessa vez antes de mudar para o menu, deve ser comparado se a vari&aacute;vel de pontos do personagem &eacute; maior que o recorde atual:</span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 113.33px;"><img alt="" src="images/image37.png" style="width: 602.00px; height: 113.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c1">Como o &nbsp;portal est&aacute; dentro de um &uacute;nico node ra&iacute;z, basta chamar apenas uma vez o get_parent().</span></p><p class="c6"><span class="c1"></span></p><p class="c4"><span class="c3">Caso obede&ccedil;a a condi&ccedil;&atilde;o, o novo valor &eacute; registrado na vari&aacute;vel global </span><span class="c3 c5">hiScore </span><span class="c3">e o nome do jogador atual dentro da vari&aacute;vel global </span><span class="c3 c5">playerName </span><span class="c3">&eacute; registrado na vari&aacute;vel global </span><span class="c3 c5">actualChampion</span><span class="c2">:</span></p><p class="c6"><span class="c2"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 81.33px;"><img alt="" src="images/image26.png" style="width: 602.00px; height: 81.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7 c13"><span class="c2"></span></p><p class="c4"><span class="c3">&nbsp; Por &uacute;ltimo apenas mudamos de cena com a vari&aacute;vel </span><span class="c3 c5">toGo </span><span class="c3">e a fun&ccedil;&atilde;o </span><span class="c3 c5">change_scene</span><span class="c2">(). Mas ela fica fora da condi&ccedil;&atilde;o:</span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 180.00px;"><img alt="" src="images/image38.png" style="width: 602.00px; height: 180.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 217.00px; height: 35.00px;"><img alt="" src="images/image22.png" style="width: 217.00px; height: 35.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 390.00px; height: 184.00px;"><img alt="" src="images/image29.png" style="width: 390.00px; height: 184.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c1">A cena deve ser instanciada na fase do jogo, e a vari&aacute;vel toGo preenchida com o Path da cena que deve ser mudada.</span></p><p class="c4 c13"><span class="c1"></span></p><p class="c4"><span class="c2">Agora dessa maneira, enquanto o jogo estiver ativo, os recordes ser&atilde;o gravados no script global. Infelizmente dessa maneira n&atilde;o &eacute; salvo permanentemente as informa&ccedil;&otilde;es: assim que o projeto for fechado, os valores s&atilde;o zerados.</span></p><p class="c6"><span class="c2"></span></p><h1 class="c16" id="h.ae0t0larirq2"><span class="c23">Utilizando Cenas Globais</span></h1><p class="c4"><span class="c2">Voc&ecirc; viu acima que &eacute; poss&iacute;vel utilizar scripts globais para salvar dados, mas tamb&eacute;m &eacute; poss&iacute;vel utilizar cenas globais no Godot. Cenas globais servem para realizar a mesma tarefa de um script global, mas nesse caso ele consegue salvar nodes e transferi-los de cena a cena. Veja um exemplo: uma m&uacute;sica tocada no menu tem que continuar a ser tocada na outra fase, mas sem reinici&aacute;-la. Sem as cenas globais n&atilde;o &eacute; poss&iacute;vel fazer isso. </span></p><p class="c4 c13"><span class="c2"></span></p><p class="c4"><span class="c3">Vamos recriar esse exemplo aqui. Primeiro deve ser criado no Godot uma cena onde apenas o node </span><span class="c3 c5">AudioStreamPlayer </span><span class="c3">ser&aacute; adicionado. Nele vai ficar o &aacute;udio que deve ser tocado entre as cenas ( </span><span class="c0">Veja o Compendium - Utilizando &aacute;udio no Godot para mais informa&ccedil;&otilde;es</span><span class="c2">&nbsp;):</span></p><p class="c4 c13"><span class="c2"></span></p><p class="c4 c13"><span class="c2"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 233.00px; height: 116.00px;"><img alt="" src="images/image6.png" style="width: 233.00px; height: 116.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 398.00px; height: 450.00px;"><img alt="" src="images/image14.png" style="width: 398.00px; height: 450.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c1">Marcamos a op&ccedil;&atilde;o &ldquo;Autoplay&rdquo; para a m&uacute;sica ser tocada automaticamente.</span></p><p class="c7 c13"><span class="c2"></span></p><p class="c10"><span class="c3">Renomeie sempre os nodes e salve sua cena. Agora Podemos realizar o processo de inserir essa cena dentro do AutoLoad indo no menu</span><span class="c0">&nbsp;Project &gt; Project Settings</span><span class="c3">. Depois selecionamos a aba </span><span class="c3 c5">AutoLoad</span><span class="c2">:</span></p><p class="c6"><span class="c2"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 444.00px; height: 297.00px;"><img alt="" src="images/image2.png" style="width: 444.00px; height: 297.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 500.00px; height: 47.00px;"><img alt="" src="images/image16.png" style="width: 500.00px; height: 47.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7 c13"><span class="c2"></span></p><p class="c10"><span class="c3">Aqui agora apenas selecionamos qual a cena deve ser carregada na op&ccedil;&atilde;o </span><span class="c3 c5">Path </span><span class="c3">e depois clicamos em </span><span class="c3 c5">Add</span><span class="c2">. A cena ser&aacute; adicionada ao AutoLoad do Godot:</span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 21.33px;"><img alt="" src="images/image28.png" style="width: 602.00px; height: 21.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c10"><span class="c3">Pronto! Agora a cena ser&aacute; sempre carregada e a m&uacute;sica dentro do node ser&aacute; executada. Qualquer cena pode se tornar global e salvar dados presentes em nodes do Godot seguindo esse processo.</span></p></body></html>