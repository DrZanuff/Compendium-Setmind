<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c14{padding-top:0pt;text-indent:36pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.c5{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c9{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:normal}.c12{color:#000000;font-weight:400;vertical-align:baseline;font-size:26pt;font-family:"Arial";font-style:normal}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c6{color:#000000;text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:normal}.c11{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;text-decoration:underline}.c13{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c0{font-size:14pt;font-weight:700}.c1{font-size:14pt}.c8{font-style:italic}.c7{height:11pt}.c10{font-size:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c13"><p class="c14 title" id="h.v2dyx7quuao"><span class="c11">Compendium - Movimento em Primeira Pessoa</span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Nesse pequeno tutorial voc&ecirc; vai aprender a como criar um personagem que se move com as teclas </span><span class="c0">WASD</span><span class="c1 c4">&nbsp;e tamb&eacute;m como controlar a c&acirc;mera com o mouse. </span></p><h2 class="c9" id="h.vhikrkxtrvgk"><span class="c5">Configurando as teclas de controle</span></h2><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Devemos criar as teclas de controle dentro do Godot. Para isso acessamos a op&ccedil;&atilde;o </span><span class="c6 c0">Project &gt; Project Settings:</span></p><p class="c2 c7"><span class="c0 c6"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 405.00px; height: 114.00px;"><img alt="" src="images/image4.png" style="width: 405.00px; height: 114.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c6 c0"></span></p><p class="c2"><span class="c1">Depois disso v&aacute; at&eacute; a aba </span><span class="c0">Input Map</span><span class="c1">&nbsp;e l&aacute; crie um novo comando inserindo o nome da action. Depois basta escolher a tecla indo no </span><span class="c0">+</span><span class="c4 c1">&nbsp;e pressionando a tecla desejada. Adicione as 4 teclas de comando que precisamos:</span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 487.50px; height: 318.18px;"><img alt="" src="images/image14.gif" style="width: 487.50px; height: 318.18px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><h2 class="c9" id="h.ku7425u2snyx"><span class="c5">Adicionando a cena do Player ao projeto</span></h2><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c4 c1">Depois de criar as actions de comando, vamos construir o personagem. A estrutura de nodes que precisamos montar &eacute;:</span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c0">- Kinematic body </span><span class="c4 c1">(Renomeie para PlayerFPS)</span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Collision Shape </span><span class="c4 c1">(Insira um capsule shape)</span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Spatial </span><span class="c4 c1">(Renomeie para Head)</span></p><p class="c2"><span class="c6 c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Camera</span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 309.33px;"><img alt="" src="images/image6.png" style="width: 602.00px; height: 309.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c6 c0"></span></p><p class="c2"><span class="c4 c1">O &ldquo;Head&rdquo; ser&aacute; a cabe&ccedil;a do personagem, onde dentro dele existir&aacute; uma c&acirc;mera. A cabe&ccedil;a vai rotacionar utilizando um eixo e a c&acirc;mera em outro,sendo que o corpo apenas se move na dire&ccedil;&atilde;o desejada e n&atilde;o rotaciona.</span></p><p class="c2 c7"><span class="c6 c0"></span></p><p class="c2"><span class="c4 c1">Salve sua cena dentro do seu projeto com uma pasta somente para ela. Depois crie um script no node raiz para continuar.</span></p><h2 class="c9" id="h.n42lvjc3m5pa"><span class="c5">Programando a rota&ccedil;&atilde;o da c&acirc;mera</span></h2><p class="c2 c7"><span class="c4 c10"></span></p><p class="c2"><span class="c1">Dentro do script vamos montar primeiro a movimenta&ccedil;&atilde;o da c&acirc;mera. Antes voc&ecirc; deve entender que o mouse possui 2 eixos de movimento na tela:</span><span class="c0">&nbsp;X </span><span class="c1">e </span><span class="c0">Y</span><span class="c1">. O</span><span class="c0">&nbsp;eixo X </span><span class="c1">controla a </span><span class="c0">rota&ccedil;&atilde;o em Y</span><span class="c1">&nbsp;da cabe&ccedil;a do objeto (Head), e o </span><span class="c0">eixo Y</span><span class="c1">&nbsp;controla a</span><span class="c0">&nbsp;rota&ccedil;&atilde;o em X</span><span class="c4 c1">&nbsp;da c&acirc;mera (filho do Head). </span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 299.00px; height: 450.00px;"><img alt="" src="images/image3.png" style="width: 299.00px; height: 450.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Crie uma vari&aacute;vel para controlarmos a sensibilidade do mouse. Agora precisamos de uma fun&ccedil;&atilde;o que j&aacute; &eacute; pr&oacute;pria do Godot chamada </span><span class="c0">_input(event):</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 190.67px;"><img alt="" src="images/image13.png" style="width: 602.00px; height: 190.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Dentro da fun&ccedil;&atilde;o precisamos agora identificar qual evento de input ser&aacute; utilizado. Como ser&aacute; o movimento do mouse, basta identificar com o</span><span class="c6 c0">&nbsp;inputEventMouseMotion:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 194.67px;"><img alt="" src="images/image1.png" style="width: 602.00px; height: 194.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c6 c0"></span></p><p class="c2"><span class="c1">Agora precisamos fazer com que a cabe&ccedil;a gire primeiro. Como dito anteriormente, a &ldquo;Head&rdquo; rotacionar&aacute; no eixo Y. Para isso precisamos ent&atilde;o utilizar o eixo X do mouse dentro da fun&ccedil;&atilde;o</span><span class="c0">&nbsp;rotate_x(). </span><span class="c1">Dentro dela precisamos converter de grau para radiano o valor com </span><span class="c0">deg2rad</span><span class="c1">; ap&oacute;s isso precisamos pegar a posi&ccedil;&atilde;o do mouse na tela com o </span><span class="c0">relative </span><span class="c4 c1">e multiplicar com a vari&aacute;vel que controla a sensibilidade.</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 134.67px;"><img alt="" src="images/image19.png" style="width: 602.00px; height: 134.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c6 c0"></span></p><p class="c2"><span class="c1">Teste o projeto e perceba que a camera j&aacute; gira, mas o mouse n&atilde;o fica preso a tela. Vamos consertar isso utilizando a fun&ccedil;&atilde;o</span><span class="c0">&nbsp;_ready()</span><span class="c4 c1">. Assim que o jogo iniciar, vamos capturar o cursor dentro da janela:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 180.00px;"><img alt="" src="images/image5.png" style="width: 602.00px; height: 180.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Agora temos apenas um problema: o mouse ficar&aacute; sempre no meio da tela e n&atilde;o teremos como fechar a aplica&ccedil;&atilde;o. Ent&atilde;o vamos criar um simples evento na fun&ccedil;&atilde;o </span><span class="c0">_physics_process(delta)</span><span class="c1">&nbsp;que checa quando pressionarmos a tecla </span><span class="c0">ESC</span><span class="c4 c1">, o game fecha automaticamente:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 250.67px;"><img alt="" src="images/image16.png" style="width: 602.00px; height: 250.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Agora que fizemos isso precisamos apenas fazer com que a c&acirc;mera rotacione no eixo</span><span class="c0">&nbsp;X.</span><span class="c4 c1">&nbsp;Se formos seguir a l&oacute;gica que fizemos antes o c&oacute;digo deve ficar assim:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 245.33px;"><img alt="" src="images/image22.png" style="width: 602.00px; height: 245.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c4 c1">Se voc&ecirc; testar o projeto, voc&ecirc; vai perceber que a c&acirc;mera rotaciona para cima sem limite algum. Isso &eacute; um grande problema, mas existe uma solu&ccedil;&atilde;o. Antes devemos criar uma vari&aacute;vel que armazena o &acirc;ngulo de rota&ccedil;&atilde;o do objeto:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 424.00px; height: 101.00px;"><img alt="" src="images/image2.png" style="width: 424.00px; height: 101.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c1">Agora na fun&ccedil;&atilde;o </span><span class="c0">_input(event)</span><span class="c1">&nbsp;vamos criar mais uma vari&aacute;vel. Ela vai servir para armazenar a posi&ccedil;&atilde;o do mouse no eixo </span><span class="c0">Y </span><span class="c4 c1">com a sensibilidade:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 84.00px;"><img alt="" src="images/image23.png" style="width: 602.00px; height: 84.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">A vari&aacute;vel </span><span class="c0">change </span><span class="c1">vai alterar seu valor conforme o mouse se move, e a vari&aacute;vel </span><span class="c0">camAngle </span><span class="c1">vai receber esse valor ao mesmo tempo. Agora devemos apenas comparar se o valor somado das duas vari&aacute;veis s&atilde;o menores que 90 e ao mesmo tempo maiores que -90, ou seja, </span><span class="c0">se o valor do mouse n&atilde;o alcan&ccedil;ou o limite tanto olhando para cima quanto para baixo</span><span class="c4 c1">, a c&acirc;mera rotaciona normalmente.</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 108.00px;"><img alt="" src="images/image17.png" style="width: 602.00px; height: 108.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><h2 class="c9" id="h.f7s9at3oab21"><span class="c5">Movimentando o Player</span></h2><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">O que falta agora &eacute; movermos o Player na dire&ccedil;&atilde;o em que ele olha. Antes devemos saber que para o personagem andar ele deve possuir um</span><span class="c0">&nbsp;vetor de dire&ccedil;&atilde;o</span><span class="c1">&nbsp;(para onde ele anda) ,um de </span><span class="c0">movimento </span><span class="c1">(indicando para onde ele deve ir) al&eacute;m de </span><span class="c0">velocidade </span><span class="c1">e tamb&eacute;m da </span><span class="c0">gravidade</span><span class="c4 c1">. Vamos antes criar essas vari&aacute;veis no script para armazenarmos os cada valor separadamente:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 419.00px; height: 197.00px;"><img alt="" src="images/image11.png" style="width: 419.00px; height: 197.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Continuando, precisamos agora criar uma fun&ccedil;&atilde;o separada apenas para guardar os c&oacute;digos de movimento do personagem. Isso auxilia e muito na hora de organizar seu script, pois se n&oacute;s formos programar em apenas um s&oacute; local do c&oacute;digo, tudo pode virar uma bagun&ccedil;a futuramente dependendo do tamanho do seu projeto. Ent&atilde;o vamos criar a fun&ccedil;&atilde;o </span><span class="c0">run </span><span class="c4 c1">com um par&acirc;metro:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 207.00px; height: 74.00px;"><img alt="" src="images/image20.png" style="width: 207.00px; height: 74.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Agora vamos identificar a dire&ccedil;&atilde;o para onde a cabe&ccedil;a (</span><span class="c0">Head</span><span class="c1">) do Player est&aacute; olhando, pois &eacute; nessa dire&ccedil;&atilde;o que ele deve andar. Na fun&ccedil;&atilde;o que criamos</span><span class="c0">&nbsp;</span><span class="c1">vamos identificar a dire&ccedil;&atilde;o para onde ele est&aacute; olhando no momento com o </span><span class="c0">basis </span><span class="c1">e guardar tudo isso em uma vari&aacute;vel.</span><span class="c0">&nbsp;</span><span class="c4 c1">Com essa fun&ccedil;&atilde;o &eacute; poss&iacute;vel identificar os vetores locais do objeto ao inv&eacute;s dos vetores globais.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 368.00px; height: 348.00px;"><img alt="" src="images/image15.gif" style="width: 368.00px; height: 348.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c1 c8">(Os eixos azuis s&atilde;o os Globais,enquanto os vermelhos s&atilde;o os Locais)</span></p><p class="c3 c7"><span class="c4 c1"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 459.00px; height: 56.00px;"><img alt="" src="images/image24.png" style="width: 459.00px; height: 56.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Agora identificado a dire&ccedil;&atilde;o, precisamos mudar o seu movimento quando alguma tecla for pressionada. Para isso podemos utilizar o vetor de dire&ccedil;&atilde;o </span><span class="c0">dir </span><span class="c1">modificando seu valor conforme os eixos de dire&ccedil;&otilde;es locais da cabe&ccedil;a identificados na vari&aacute;vel </span><span class="c0">aim</span><span class="c4 c1">:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 496.00px; height: 266.00px;"><img alt="" src="images/image12.png" style="width: 496.00px; height: 266.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c6 c0"></span></p><p class="c2"><span class="c1">At&eacute; esse ponto j&aacute; temos os valores de movimento, mas o Player ainda n&atilde;o vai andar, pois n&atilde;o estamos usando esses valores at&eacute; agora. Para isso, vamos utilizar a vari&aacute;vel de movimento e aplicar o valor obtido da dire&ccedil;&atilde;o tanto no </span><span class="c0">eixo x</span><span class="c1">&nbsp;quanto no </span><span class="c0">eixo z</span><span class="c4 c1">:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 505.00px; height: 343.00px;"><img alt="" src="images/image8.png" style="width: 505.00px; height: 343.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c6 c0"></span></p><p class="c2"><span class="c1">Tendo o movimento, podemos agora usar a fun&ccedil;&atilde;o </span><span class="c0">move_and_slide</span><span class="c4 c1">&nbsp;do godot para aplicarmos os valores dentro dela e fazer o objeto se mover:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 514.49px; height: 381.50px;"><img alt="" src="images/image18.png" style="width: 514.49px; height: 381.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Para que o Godot come&ccedil;e a executar o comando, &eacute; necess&aacute;rio que voc&ecirc; chame a fun&ccedil;&atilde;o. Para isso podemos agora na </span><span class="c0">_physics_process(delta) </span><span class="c4 c1">chamar a fun&ccedil;&atilde;o run e inserir como par&acirc;metro o delta, que &eacute; o tempo em m&iacute;lisegundos descrito anteriormente.</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 384.00px; height: 49.00px;"><img alt="" src="images/image10.png" style="width: 384.00px; height: 49.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c4 c1">Se voc&ecirc; testar o projeto vai perceber que o personagem anda sozinho pelo infinito. Devemos impedir isso fazendo com que toda hora os vetores de dire&ccedil;&atilde;o fiquem com valor zero acima do c&oacute;digo da fun&ccedil;&atilde;o. Esse valor s&oacute; &eacute; modificado se alguma tecla de movimento for acionada:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 332.00px; height: 53.00px;"><img alt="" src="images/image25.png" style="width: 332.00px; height: 53.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><h2 class="c9" id="h.1vplncp13c5m"><span class="c5">Adicionando gravidade e pulo no jogo</span></h2><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">A &uacute;nica coisa que falta agora &eacute; aplicar a for&ccedil;a de gravidade no personagem. Para isso vamos fazer com que toda hora o movimento aplicado no eixo y seja incrementado utilizando o valor da gravidade multiplicado pelo par&acirc;metro da fun&ccedil;&atilde;o </span><span class="c0">dt</span><span class="c4 c1">. Esse par&acirc;metro vai receber futuramente o valor em milisegundos, fazendo com que em qualquer m&aacute;quina que executar o jogo rode no mesmo tempo que outras:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 389.00px; height: 77.00px;"><img alt="" src="images/image21.png" style="width: 389.00px; height: 77.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">A gravidade j&aacute; funciona, mas podemos programar para que quando uma tecla for pressionada </span><span class="c0">(o espa&ccedil;o por exemplo)</span><span class="c1">&nbsp;e se o personagem estiver no ch&atilde;o, ele pule. Para isso basta apenas comparar qual tecla foi pressionada e utilizar a fun&ccedil;&atilde;o </span><span class="c0">is_on_floor() </span><span class="c1">na mesma senten&ccedil;a, e por fim modificar o valor do </span><span class="c0">eixo Y</span><span class="c4 c1">&nbsp;da vari&aacute;vel de movimento:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 80.00px;"><img alt="" src="images/image9.png" style="width: 602.00px; height: 80.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c4 c1">Pronto! At&eacute; aqui seu personagem j&aacute; possui os movimentos b&aacute;sicos e consegue andar pelo cen&aacute;rio. Basta instanci&aacute;-lo na cena que desejar us&aacute;-lo, desde que ela possua um static body para que ele fique firme no ch&atilde;o.</span></p><p class="c2 c7"><span class="c4 c1"></span></p><h2 class="c9" id="h.zva38eg9eeh"><span class="c5">Fazendo o ponteiro do mouse aparecer e desaparecer</span></h2><p class="c2"><span class="c1">Voc&ecirc; pode ter notado que quando o jogo se inicia, o mouse fica travado no meio da tela e n&atilde;o &eacute; poss&iacute;vel mais clicar fora da janela do game. Podemos criar um sistema em que quando o jogador pressiona determinada tecla, o game faz com que o mouse apare&ccedil;a e desapare&ccedil;a. Uma forma de fazer isso &eacute; deletando o c&oacute;digo que fizemos para a tecla </span><span class="c0">ESC</span><span class="c1">, que quando for pressionada o jogo fecha automaticamente. Se voc&ecirc; apertar a tecla esc sem o c&oacute;digo que montamos, o mouse sai do modo hidden (</span><span class="c0">Escondido</span><span class="c4 c1">) e volta a ficar vis&iacute;vel na tela, podendo interagir normalmente com outros elementos. </span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Caso queira utilizar outra tecla para fazer o ponteiro do mouse aparecer, basta utilizar a fun&ccedil;&atilde;o Input.</span><span class="c0">MOUSE_MODE_VISIBLE </span><span class="c4 c1">dentro da condi&ccedil;&atilde;o e do _physics_process(delta):</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 74.67px;"><img alt="" src="images/image7.png" style="width: 602.00px; height: 74.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c7"><span class="c4 c1"></span></p><p class="c2"><span class="c1">Se quiser que o mouse volte ao modo normal de jogo, basta programar outra condi&ccedil;&atilde;o e utilizar a fun&ccedil;&atilde;o </span><span class="c0">Input.MOUSE_MODE_CAPTURED</span><span class="c1">.</span></p></body></html>