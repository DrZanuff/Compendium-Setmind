<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=N4duVc9C58uwPiY8_59Fz_5Jgr8ufe5A6KahQF76Xmg');.lst-kix_ijoypide99jf-2>li:before{content:"\0025a0  "}.lst-kix_ijoypide99jf-1>li:before{content:"\0025cb  "}.lst-kix_ijoypide99jf-3>li:before{content:"\0025cf  "}ul.lst-kix_lcb7ou5b0uu6-8{list-style-type:none}ul.lst-kix_lcb7ou5b0uu6-7{list-style-type:none}ul.lst-kix_lcb7ou5b0uu6-6{list-style-type:none}ul.lst-kix_lcb7ou5b0uu6-5{list-style-type:none}ul.lst-kix_lcb7ou5b0uu6-4{list-style-type:none}.lst-kix_ijoypide99jf-6>li:before{content:"\0025cf  "}ul.lst-kix_lcb7ou5b0uu6-3{list-style-type:none}ul.lst-kix_lcb7ou5b0uu6-2{list-style-type:none}.lst-kix_ijoypide99jf-5>li:before{content:"\0025a0  "}ul.lst-kix_lcb7ou5b0uu6-1{list-style-type:none}ul.lst-kix_lcb7ou5b0uu6-0{list-style-type:none}.lst-kix_ijoypide99jf-4>li:before{content:"\0025cb  "}.lst-kix_ijoypide99jf-0>li:before{content:"\0025cf  "}.lst-kix_lcb7ou5b0uu6-8>li:before{content:"\0025a0  "}.lst-kix_lcb7ou5b0uu6-6>li:before{content:"\0025cf  "}.lst-kix_lcb7ou5b0uu6-5>li:before{content:"\0025a0  "}.lst-kix_lcb7ou5b0uu6-7>li:before{content:"\0025cb  "}ul.lst-kix_ijoypide99jf-8{list-style-type:none}ul.lst-kix_ijoypide99jf-7{list-style-type:none}ul.lst-kix_ijoypide99jf-6{list-style-type:none}ul.lst-kix_ijoypide99jf-5{list-style-type:none}.lst-kix_lcb7ou5b0uu6-3>li:before{content:"\0025cf  "}ul.lst-kix_ijoypide99jf-4{list-style-type:none}ul.lst-kix_ijoypide99jf-3{list-style-type:none}.lst-kix_lcb7ou5b0uu6-4>li:before{content:"\0025cb  "}ul.lst-kix_ijoypide99jf-2{list-style-type:none}ul.lst-kix_ijoypide99jf-1{list-style-type:none}ul.lst-kix_ijoypide99jf-0{list-style-type:none}.lst-kix_lcb7ou5b0uu6-2>li:before{content:"\0025a0  "}.lst-kix_ijoypide99jf-7>li:before{content:"\0025cb  "}.lst-kix_lcb7ou5b0uu6-1>li:before{content:"\0025cb  "}.lst-kix_ijoypide99jf-8>li:before{content:"\0025a0  "}.lst-kix_lcb7ou5b0uu6-0>li:before{content:"\0025cf  "}ol{margin:0;padding:0}table td,table th{padding:0}.c0{color:#ffffff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c5{color:#ffffff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:italic}.c7{color:#cccccc;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c9{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.c1{color:#ffffff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c15{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c18{color:#ee5720;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Roboto Mono";font-style:normal}.c11{text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:normal}.c23{text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c19{font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Arial"}.c16{color:#000000;font-weight:400;font-size:11pt}.c27{color:#000000;font-weight:400;font-size:12pt}.c24{background-color:#0c1013;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c2{color:#ffffff;font-size:12pt}.c25{color:#ee5720;font-size:12pt}.c20{padding:0;margin:0}.c21{font-family:"Roboto Mono";color:#ee5720}.c6{height:11pt}.c22{color:#cccccc}.c8{font-weight:700}.c26{color:#ffffff}.c17{margin-left:72pt}.c14{height:20pt}.c13{padding-left:0pt}.c4{margin-left:36pt}.c12{text-indent:36pt}.c10{font-style:italic}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c24"><p class="c15"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 188.00px; height: 88.00px;"><img alt="" src="images/image36.png" style="width: 188.00px; height: 88.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c15"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 20.00px; height: 58.50px;"><img alt="" src="images/image9.png" style="width: 25.00px; height: 58.50px; margin-left: -5.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c1"></span></p><p class="c3"><span class="c7">Neste compendium vamos explicar como criar um inimigo que persegue o jogador pelo mapa, se movendo pelo cen&aacute;rio e evitando obst&aacute;culos. Para isso usaremos o Node Navigation2D.<br></span></p><p class="c3"><span class="c7">T&oacute;picos:</span></p><ul class="c20 lst-kix_lcb7ou5b0uu6-0 start"><li class="c3 c13 c4"><span class="c7">O que &eacute; Pathfind</span></li><li class="c3 c13 c4"><span class="c7">O que &eacute; o Navigation2D</span></li><li class="c3 c13 c4"><span class="c7">Estrutura da Cena</span></li></ul><ul class="c20 lst-kix_lcb7ou5b0uu6-1 start"><li class="c3 c17 c13"><span class="c22 c8">Usando </span><span class="c8 c22">NavigationPolygonInstance</span></li><li class="c3 c13 c17"><span class="c7">Usando TileMap<br></span></li></ul><ul class="c20 lst-kix_lcb7ou5b0uu6-0"><li class="c3 c13 c4"><span class="c7">C&oacute;digo Principal</span></li><li class="c3 c13 c4"><span class="c7">C&oacute;digo do Inimigo</span></li><li class="c3 c13 c4"><span class="c7">Melhorando a Movimenta&ccedil;&atilde;o do Inimigo</span></li></ul><ul class="c20 lst-kix_lcb7ou5b0uu6-1 start"><li class="c3 c17 c13"><span class="c7">Sistema de Rota&ccedil;&atilde;o Suave</span></li><li class="c3 c17 c13"><span class="c7">Colidindo com outros inimigos</span></li><li class="c3 c17 c13"><span class="c7">Velocidades diferentes</span></li></ul><p class="c3 c6"><span class="c11 c16"></span></p><h1 class="c9" id="h.ybpuyoy1x1fr"><span class="c21 c8">O que &eacute; Pathfind</span></h1><p class="c3 c6"><span class="c11 c27"></span></p><p class="c15 c6"><span class="c1"></span></p><p class="c3 c6"><span class="c11 c16"></span></p><p class="c15"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 452.00px;"><img alt="" src="images/image18.gif" style="width: 602.00px; height: 452.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c15"><span class="c5">Exemplo de pathfind no jogo The Maestros</span></p><p class="c15 c6"><span class="c11 c16"></span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c2">Pathfinding significa em ingl&ecirc;s busca de caminho. O algoritmo respons&aacute;vel por mover um personagem de um ponto a outro, desviando de obst&aacute;culos, &eacute; famoso pois &eacute; usado muito por programadores de games. A movimenta&ccedil;&atilde;o de agentes (um personagem do jogo) em um espa&ccedil;o &eacute; um dos segmento da Intelig&ecirc;ncia Artificial mais comuns na produ&ccedil;&atilde;o de games. O objetivo desse tipo de algoritmo &eacute; achar o caminho mais r&aacute;pido entre dois pontos ( por exemplo: o inimigo &eacute; o jogador) evitando obst&aacute;culos, como paredes ou outros obst&aacute;culos.</span></p><p class="c15 c6"><span class="c11 c16"></span></p><h1 class="c9" id="h.i41vjz8d59ap"><span class="c18 c8">O que &eacute; o Navigation2D</span></h1><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c2">O node </span><span class="c2 c8">Navigation2D</span><span class="c2">&nbsp;&eacute; respons&aacute;vel por encontrar este caminho. Ele possui m&eacute;todos para encontrar o caminho dentro de uma malha, esta malha pode ser um node &nbsp;</span><span class="c2 c8">NavigationPolygonInstance</span><span class="c2">&nbsp;ou um node </span><span class="c2 c8">TileMap</span><span class="c2">. Basicamente esta malha &eacute; o caminho que representa onde um personagem controlado pelo </span><span class="c2 c8">Navigation2D</span><span class="c0">&nbsp;pode se locomover.</span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 250.67px;"><img alt="" src="images/image31.png" style="width: 602.00px; height: 250.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c15"><span class="c26 c10">O espa&ccedil;o verde &eacute; a malha do node </span><span class="c10 c26">NavigationPolygonInstance</span><span class="c26 c10">, que representa o espa&ccedil;o f&iacute;sico onde um agente pode se mover</span></p><p class="c3 c6"><span class="c0"></span></p><h1 class="c9" id="h.ycyvixs6t0p2"><span class="c18 c8">Estrutura da Cena</span></h1><p class="c3"><span class="c2">Antes de prosseguir, &eacute; preciso entender a estrutura do Navigation2D. Perceba que o filho dele &eacute; um </span><span class="c2 c8">NavigationPolygonInstance</span><span class="c2">. Isto &eacute; importante, pois o </span><span class="c2">node</span><span class="c2">&nbsp;que representa o caminho que o agente vai se mover deve ser filho de um </span><span class="c2 c8">Navigation2D</span><span class="c2">&nbsp;para funcionar. Os pr&oacute;ximos dois subt&oacute;picos ir&atilde;o mostrar os dois tipos de node de caminho que pode ser usado com um </span><span class="c2">Navigation2D</span><span class="c0">, ent&atilde;o se sinta a vontade de pular um dos dois para ir direto o que se assemelha mais ao seu projeto.</span></p><p class="c3 c6"><span class="c0"></span></p><ul class="c20 lst-kix_ijoypide99jf-0 start"><li class="c3 c4 c13"><span class="c25 c8">Usando </span><span class="c25 c8">NavigationPolygonInstance</span></li></ul><p class="c3 c4"><span class="c2">Neste momento temos essa estrutura. Um node para colocar o </span><span class="c2 c8">StaticBody2D</span><span class="c2">, um node para colocar os inimigos, um Player que se movimenta em 8 dire&ccedil;&otilde;es (Veja o Compendium - &nbsp;</span><span class="c2">Movimento em 8 Dire&ccedil;&otilde;es 2D) e o </span><span class="c2 c8">Navigation2D.</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 250.67px;"><img alt="" src="images/image20.png" style="width: 602.00px; height: 250.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c2">Adicione um </span><span class="c2 c8">NavigationPolygonInstance</span><span class="c2 c8">&nbsp;</span><span class="c2">filho do </span><span class="c11 c2 c8">Navigation2D.</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 193.00px; height: 52.00px;"><img alt="" src="images/image8.png" style="width: 193.00px; height: 52.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c11 c2 c8"></span></p><p class="c3 c4"><span class="c2">Esta mensagem de erro informa que precisamos adicionar um caminho para o node funcionar. Podemos criar um caminho clicando no bot&atilde;o </span><span class="c2 c10">Criar Pontos</span><span class="c0">&nbsp;na parte de cima da viewport:</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 162.00px; height: 30.00px;"><img alt="" src="images/image23.png" style="width: 162.00px; height: 30.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 543.00px; height: 326.00px;"><img alt="" src="images/image32.gif" style="width: 543.00px; height: 326.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c15 c12"><span class="c5">&nbsp;Quando aparecer a mensagem na tela, clique em Create. Use o bot&atilde;o esquerdo do mouse para adicionar os pontos.</span></p><p class="c15 c6 c12"><span class="c5"></span></p><p class="c3 c4"><span class="c0">Esta parte esverdeada representa o caminho que os inimigos deste exemplo v&atilde;o poder se mover, lembrando, somente na parte verde. Ent&atilde;o temos um problema, pois na parte de baixo possui um quadrado que &eacute; s&oacute;lido e os inimigos nem o jogadores n&atilde;o deveriam ser capaz de andar nesta &aacute;rea.</span></p><p class="c3 c6 c4"><span class="c5"></span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 185.00px; height: 157.00px;"><img alt="" src="images/image11.png" style="width: 185.00px; height: 157.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c5"></span></p><p class="c3 c4"><span class="c2">Para resolver este problema, clicamos novamente no bot&atilde;o </span><span class="c2 c10">Criar Pontos</span><span class="c2">&nbsp;e adicionamos um &ldquo;buraco&rdquo; na malha de navega&ccedil;&atilde;o:<br></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 436.00px; height: 324.00px;"><img alt="" src="images/image3.gif" style="width: 436.00px; height: 324.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c2">Com isso a estrutura do </span><span class="c2 c8">Navigation2D</span><span class="c0">&nbsp;usando pol&iacute;gonos est&aacute; pronto</span></p><p class="c3 c6"><span class="c5"></span></p><p class="c3 c6"><span class="c5"></span></p><ul class="c20 lst-kix_ijoypide99jf-0"><li class="c3 c13 c4"><span class="c11 c25 c8">Usando TileMap</span></li></ul><p class="c3 c4"><span class="c2">Neste t&oacute;pico n&atilde;o vamos nos aprofundar em como criar um TileMap, para isso veja o Compendium - </span><span class="c0">Utilizando TileMaps 2D. A estrutura da cena ficar&aacute; neste formato:</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 532.00px; height: 179.00px;"><img alt="" src="images/image4.png" style="width: 532.00px; height: 179.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c2">Perceba que o </span><span class="c2 c8">Navigation2D</span><span class="c0">&nbsp;ficar&aacute; mais acima do Player e dos inimigos, pois como iremos usar um TileMap a ordem importa aqui, caso contr&aacute;rio o cen&aacute;rio ficaria na &ldquo;frente&rdquo; dos personagens do jogo.</span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c2">Adicione ent&atilde;o o node </span><span class="c2 c8">TileMap</span><span class="c2">&nbsp;como filho do </span><span class="c11 c2 c8">Navigation2D:</span></p><p class="c3 c4"><span class="c2 c8">&nbsp;</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 229.00px; height: 59.00px;"><img alt="" src="images/image22.png" style="width: 229.00px; height: 59.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c2">Ap&oacute;s isso v&aacute; no inspetor e selecione a op&ccedil;&atilde;o </span><span class="c2 c10 c19">New TileSet</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 244.00px; height: 109.00px;"><img alt="" src="images/image30.png" style="width: 244.00px; height: 109.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c0">Depois clique novamente em New TileSet para editar as op&ccedil;&otilde;es deste TileMap. Voc&ecirc; pode criar um TileMap de uma &uacute;nica imagem ou de v&aacute;rias imagens como visto no Compendium - Utilizando TileMaps 2D. Para este exemplo vamos utilizar v&aacute;rias imagens:</span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 333.33px;"><img alt="" src="images/image13.gif" style="width: 602.00px; height: 333.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c2">Ap&oacute;s isso, devemos definir as &aacute;reas de colis&atilde;o para o nosso personagem e a &aacute;rea de navega&ccedil;&atilde;o para nossos inimigos. Selecione uma imagem e clique em </span><span class="c19 c2 c10">New Single Tile</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 410.00px; height: 183.00px;"><img alt="" src="images/image27.png" style="width: 410.00px; height: 183.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c0">Selecione o &Iacute;cone de Snap para facilitar na hora de definir a &aacute;rea do Tile:</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 135.00px; height: 209.00px;"><img alt="" src="images/image19.png" style="width: 135.00px; height: 209.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c0">Ap&oacute;s isso vamos definir a &aacute;rea de navega&ccedil;&atilde;o do inimigos clicando em: New Single Tile-&gt; Selecionando a &aacute;rea da imagem-&gt; Clique em Navigation -&gt;Create New Rectangle-&gt; Selecione &aacute;rea de Navega&ccedil;&atilde;o:</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 200.00px;"><img alt="" src="images/image33.gif" style="width: 602.00px; height: 200.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c0">Vamos fazer o mesmo s&oacute; que para as paredes que ser&atilde;o s&oacute;lida no jogo. S&oacute; que em vez de selecionar Navigation vamos selecionar Collision para definir a parte est&aacute;tica:</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 152.00px;"><img alt="" src="images/image29.gif" style="width: 602.00px; height: 152.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c0">Agora voc&ecirc; pode &ldquo;desenhar&rdquo; sua fase selecionando a grama, onde os inimigos ir&atilde;o se mover, e a madeira onde ser&aacute; s&oacute;lido para o jogador. Para &ldquo;pintar&rdquo; com o tile pressione o bot&atilde;o esquerdo do mouse:</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 276.00px;"><img alt="" src="images/image21.gif" style="width: 602.00px; height: 276.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c0"></span></p><h1 class="c9 c14" id="h.4agf6j29f54p"><span class="c8 c18"></span></h1><h1 class="c9" id="h.v8ckiu713tuy"><span class="c18 c8">C&oacute;digo Principal</span></h1><p class="c3 c6"><span class="c11 c16"></span></p><p class="c3"><span class="c2">Antes de prosseguir, vamos adicionar um node Timer na cena, este timer ser&aacute; respons&aacute;vel por ficar chamando a fun&ccedil;&atilde;o que ir&aacute; calcular o melhor caminho para o alcan&ccedil;ar o jogador. Como o jogador se move o tempo todo o tempo desse timer deve ser baixo.</span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 225.00px; height: 65.00px;"><img alt="" src="images/image16.png" style="width: 225.00px; height: 65.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c0">Crie j&aacute; um sinal no Timer para chamar no c&oacute;digo da fase. Mude as configura&ccedil;&otilde;es do Timer para estes valores:</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 249.00px; height: 198.00px;"><img alt="" src="images/image7.png" style="width: 249.00px; height: 198.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c0">As primeira linhas de c&oacute;digo ser&atilde;o dentro do sinal criado pelo Timer:</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 432.00px; height: 127.00px;"><img alt="" src="images/image10.png" style="width: 432.00px; height: 127.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c0">Na linha 4 estamos pegando a posi&ccedil;&atilde;o do jogador e na linha 5 pegamos o node Navigation2D. Agora vamos criar um c&oacute;digo para ficar atualizando o movimento de todos os inimigos. O c&oacute;digo ser&aacute; esse:</span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 204.00px;"><img alt="" src="images/image17.png" style="width: 602.00px; height: 204.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c2">Na linha 7 iniciamos um loop que ir&aacute; executar o c&oacute;digo para cada inimigo filho do node Inimigos. A fun&ccedil;&atilde;o </span><span class="c2 c10">get_simple_path</span><span class="c2 c10">( )</span><span class="c2">&nbsp;busca o melhor caminho entre o inimigo atual ( </span><span class="c2 c10">inimigo.</span><span class="c2 c10">global_position</span><span class="c2">&nbsp;) e o jogador ( </span><span class="c2 c10">player</span><span class="c2">&nbsp;). O &uacute;ltimo par&acirc;metro, </span><span class="c2 c10">false</span><span class="c0">, serve para n&atilde;o haver uma compress&atilde;o no caminho, tornando o caminho o mais preciso poss&iacute;vel. </span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c0">Basicamente o que isto vai acontecer internamente quando o c&oacute;digo executar:</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 249.33px;"><img alt="" src="images/image14.png" style="width: 602.00px; height: 249.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c15 c12"><span class="c5">Pontos ilustrativos. O inimigo &eacute; o personagem vermelho e o jogador o personagem azul. Os pontos gerados ser&atilde;o usados pelo inimigo para ele se mover at&eacute; o jogador.</span></p><p class="c15 c6 c12"><span class="c5"></span></p><p class="c3"><span class="c2">Por isso que a linha 9 </span><span class="c2">remove</span><span class="c2">&nbsp;o ponto 0, para o inimigo iniciar seu movimento diretamente para o pronto 1. O inimigo inicia seu movimento, assim que recebe a caminho na linha 11. Agora falta criar de fato a cena inimigo e criar a fun&ccedil;&atilde;o </span><span class="c2 c10">define_target</span><span class="c2 c10">( )</span><span class="c2">.</span></p><h1 class="c9 c14" id="h.nr1mssp75adc"><span class="c18 c8"></span></h1><h1 class="c9" id="h.wer4wptb85hc"><span class="c8 c21">C&oacute;digo do Inimigo</span><span class="c18 c8">&nbsp;</span></h1><p class="c3"><span class="c2">Para criar a cena do inimigo vamos usar um </span><span class="c2 c8">KinematicBody2D</span><span class="c2">. Mude o nome desse node para </span><span class="c2 c8">Inimigo</span><span class="c2">. Coloque o Sprite e o </span><span class="c2 c8">CollisionShape2D</span><span class="c2">&nbsp;que ir&aacute; representar a colis&atilde;o do objeto </span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 179.00px; height: 80.00px;"><img alt="" src="images/image35.png" style="width: 179.00px; height: 80.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c11 c16"></span></p><p class="c3"><span class="c2">Crie um Script para o inimigo. As primeiras vari&aacute;veis desse script ser&atilde;o </span><span class="c2 c10">path</span><span class="c2">&nbsp;e </span><span class="c2 c10">speed</span><span class="c2">. </span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 306.00px; height: 87.00px;"><img alt="" src="images/image24.png" style="width: 306.00px; height: 87.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c11 c16"></span></p><p class="c3"><span class="c0">A vari&aacute;vel path ser&aacute; usado para armazenar aquele caminho de pontos que vimos anteriormente, para o nosso inimigo se mover. J&aacute; a vari&aacute;vel speed representa a velocidade do inimigo. </span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c0">Agora vamos criar um processo para movimentar o inimigo assim que ele possuir um caminho. Adicione este script ap&oacute;s as vari&aacute;veis.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 121.33px;"><img alt="" src="images/image34.png" style="width: 602.00px; height: 121.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c0">A linha 8 faz o inimigo se mover para o pr&oacute;ximo ponto do caminho. E na linha 10 ele verifica se o inimigo est&aacute; pr&oacute;ximo o suficiente desse ponto para ent&atilde;o remov&ecirc;-lo e avan&ccedil;ar para o pr&oacute;ximo ponto. </span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c2">Crie a fun&ccedil;&atilde;o </span><span class="c2 c10">define_target( ) </span><span class="c0">que vimos anteriormente para &nbsp;receber o caminho:</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 413.00px; height: 64.00px;"><img alt="" src="images/image5.png" style="width: 413.00px; height: 64.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c2">Agora volte na cena da fase e adicione alguns inimigos dentro do node </span><span class="c11 c2 c8">Inimigos</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 270.67px;"><img alt="" src="images/image26.png" style="width: 602.00px; height: 270.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c11 c2 c8"></span></p><p class="c3"><span class="c0">Agora teste o resultado. Voc&ecirc; ter&aacute; um resultado como este abaixo:</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 350.67px;"><img alt="" src="images/image12.gif" style="width: 602.00px; height: 350.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6"><span class="c0"></span></p><p class="c3"><span class="c0">&Eacute; um resultado interessante, mas nos pr&oacute;ximos t&oacute;picos vamos ver como &eacute; poss&iacute;vel melhorar este movimento.</span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c6"><span class="c0"></span></p><h1 class="c9" id="h.3q8v29t04nul"><span class="c18 c8">Melhorando a Movimenta&ccedil;&atilde;o do Inimigo</span></h1><p class="c3 c6"><span class="c11 c16"></span></p><ul class="c20 lst-kix_ijoypide99jf-0"><li class="c3 c13 c4"><span class="c11 c25 c8">Sistema de Rota&ccedil;&atilde;o Suave</span></li></ul><p class="c3 c4"><span class="c0">A primeira coisa que poder&iacute;amos fazer para melhorar a forma como o inimigo segue o jogador &eacute; faz&ecirc;-lo olhar em dire&ccedil;&atilde;o para onde ele est&aacute; indo. Para isso podemos adicionar essas linhas no script do inimigo.</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 177.33px;"><img alt="" src="images/image1.png" style="width: 602.00px; height: 177.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c0">A linha 10 e 11 far&atilde;o o inimigo rotacionar para o ponto que ele est&aacute; se encaminhando. O resultado ser&aacute; esse:</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 349.33px;"><img alt="" src="images/image25.gif" style="width: 602.00px; height: 349.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c2">Se o seu inimigo estiver &ldquo;andando de costas&rdquo; para a dire&ccedil;&atilde;o do jogador voc&ecirc; pode resolver isso de forma bem simples. Selecione o node Sprite do inimigo e no inspector marque a op&ccedil;&atilde;o </span><span class="c2 c10">flip_h</span></p><p class="c3 c6 c4"><span class="c19 c2 c10"></span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 249.00px; height: 405.00px;"><img alt="" src="images/image28.png" style="width: 249.00px; height: 405.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c19 c2 c10"></span></p><p class="c3 c4"><span class="c0">Isto far&aacute; o sprite ficar &ldquo;espelhado&rdquo; para o outro lado. Se voc&ecirc; testar novamente o projeto o resultado ser&aacute; esse:</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 348.00px;"><img alt="" src="images/image37.gif" style="width: 602.00px; height: 348.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c6 c4"><span class="c0"></span></p><ul class="c20 lst-kix_ijoypide99jf-0"><li class="c3 c13 c4"><span class="c11 c8 c25">Colidindo com outros inimigos</span></li></ul><p class="c3 c4"><span class="c0">Voc&ecirc; deve ter percebido que se o jogo ficar executando por algum tempo a probabilidade de um inimigo ficar &ldquo;em cima do outro&rdquo; &eacute; grande.</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 345.33px;"><img alt="" src="images/image2.gif" style="width: 602.00px; height: 345.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c2">Por esse motivo que fizemos nosso inimigo como um </span><span class="c2">KinematicBody</span><span class="c0">, pois assim podemos usufruir das funcionalidades desse node. Adicione essas linhas de c&oacute;digo no script do Inimigo.</span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 190.67px;"><img alt="" src="images/image6.png" style="width: 602.00px; height: 190.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c6 c12"><span class="c0"></span></p><p class="c3 c4"><span class="c2">A fun&ccedil;&atilde;o </span><span class="c2 c10">test_move</span><span class="c2 c10">( )</span><span class="c2">&nbsp;na linha 8 verifica se o inimigo est&aacute; colidindo com outro corpo ( a parede, o jogador, outro inimigo ). Se sim, diminu&iacute;mos um pouco a velocidade do inimigo e &ldquo;empurramos&rdquo; o inimigo para longe desse obst&aacute;culo usando a fun&ccedil;&atilde;o </span><span class="c2 c10">move_and_slide</span><span class="c2 c10">( )</span><span class="c0">&nbsp;na linha 11.</span></p><p class="c3 c6 c4"><span class="c0"></span></p><p class="c3 c4"><span class="c0">Se n&atilde;o estiver colidindo a velocidade do inimigo volta a ser 100 na linha 13. O resultado dessa modifica&ccedil;&atilde;o ser&aacute; esse:</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 344.00px;"><img alt="" src="images/image15.gif" style="width: 602.00px; height: 344.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></body></html>