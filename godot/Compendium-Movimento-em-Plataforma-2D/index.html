<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ul.lst-kix_k8vezn7cief9-8{list-style-type:none}.lst-kix_k8vezn7cief9-0>li:before{content:"-  "}ul.lst-kix_k8vezn7cief9-6{list-style-type:none}ul.lst-kix_k8vezn7cief9-7{list-style-type:none}.lst-kix_k8vezn7cief9-5>li:before{content:"-  "}.lst-kix_k8vezn7cief9-6>li:before{content:"-  "}.lst-kix_k8vezn7cief9-7>li:before{content:"-  "}.lst-kix_k8vezn7cief9-4>li:before{content:"-  "}.lst-kix_k8vezn7cief9-8>li:before{content:"-  "}ul.lst-kix_k8vezn7cief9-4{list-style-type:none}.lst-kix_k8vezn7cief9-2>li:before{content:"-  "}.lst-kix_k8vezn7cief9-3>li:before{content:"-  "}ul.lst-kix_k8vezn7cief9-5{list-style-type:none}ul.lst-kix_k8vezn7cief9-2{list-style-type:none}ul.lst-kix_k8vezn7cief9-3{list-style-type:none}ul.lst-kix_k8vezn7cief9-0{list-style-type:none}.lst-kix_k8vezn7cief9-1>li:before{content:"-  "}ul.lst-kix_k8vezn7cief9-1{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c0{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c12{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c1{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c8{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c6{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c14{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c11{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c4{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c13{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;text-decoration:underline}.c3{margin-left:36pt;padding-left:0pt}.c9{padding:0;margin:0}.c10{margin-left:36pt}.c5{height:11pt}.c7{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c4"><h1 class="c14" id="h.46dtxok56i6f"><span class="c13">Compendium - Movimento em Plataforma 2D</span></h1><p class="c2"><span>Jogos de plataforma s&atilde;o um dos g&ecirc;neros mais famosos do mundo. Eram bem comuns em consoles como super nintendo e mega drive. Nesse estilo de jogo a c&acirc;mera &eacute; posicionada em 2D e o movimento b&aacute;sico do personagem &eacute; andar em 4 dire&ccedil;&otilde;es </span><span class="c7">(cima, baixo, esquerda e direita)</span><span class="c1">,e tamb&eacute;m pular. </span></p><p class="c11 c5"><span class="c1"></span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 434.50px; height: 243.32px;"><img alt="" src="images/image12.gif" style="width: 434.50px; height: 243.32px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span class="c1">Para come&ccedil;armos, precisamos antes criar a cena do personagem. Ent&atilde;o dentro do Godot vamos utilizar esses nodes:</span></p><p class="c2 c5"><span class="c8"></span></p><p class="c2"><span class="c8">KinematicBody2D</span></p><ul class="c9 lst-kix_k8vezn7cief9-0 start"><li class="c2 c3"><span class="c8">Sprite</span></li><li class="c2 c3"><span class="c8">CollisionShape2D</span></li></ul><p class="c2 c5 c10"><span class="c8"></span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 515.00px; height: 283.00px;"><img alt="" src="images/image9.png" style="width: 515.00px; height: 283.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span>O </span><span class="c7">KinematicBody2D </span><span>servir&aacute; para movermos o personagem. Dentro desse node podemos inserir um </span><span class="c7">Sprite </span><span>para o corpo, e por fim com o </span><span class="c7">CollisionShape2D </span><span>inserimos um colisor para ele.</span></p><h2 class="c6" id="h.34s7q8vluduu"><span class="c0">Programando a Movimenta&ccedil;&atilde;o</span></h2><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span>Depois de ter feito isso, salve sua cena e crie um script dentro do node raiz </span><span class="c7">(N&atilde;o se esque&ccedil;a de renomear os nodes). </span><span>Dentro do script precisaremos criar 3 vari&aacute;veis: uma para a velocidade do personagem, outra para definirmos a dire&ccedil;&atilde;o do player, e por fim mais uma para a movimenta&ccedil;&atilde;o do Player. Com o </span><span class="c7">export </span><span>a vari&aacute;vel se torna edit&aacute;vel na aba </span><span class="c7">inspector</span><span class="c1">, fazendo com que ela possa receber valores diferentes em cada cena que for instanciada:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 329.00px; height: 128.00px;"><img alt="" src="images/image10.png" style="width: 329.00px; height: 128.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span>Definido essas tr&ecirc;s vari&aacute;veis, podemos inserir dentro da fun&ccedil;&atilde;o </span><span class="c7">_physics_process(delta) </span><span>a condi&ccedil;&atilde;o que compara se for pressionado as setas da direita ou esquerda, o personagem se move para a dire&ccedil;&atilde;o desejada incrementando ou decrementando o valor do eixo X da vari&aacute;vel </span><span class="c7">dir </span><span class="c1">utilizando o valor da velocidade multiplicado por delta. </span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 540.00px; height: 130.00px;"><img alt="" src="images/image2.png" style="width: 540.00px; height: 130.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span>&nbsp;Lembre-se que o </span><span class="c7">delta </span><span class="c1">&eacute; o valor de tempo em milisegundos que o processador realiza todo o processo dentro do jogo. Ele &eacute; muito importante, pois faz com que todas as m&aacute;quinas que rodarem o programa tenham o mesmo tempo de execu&ccedil;&atilde;o.</span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span>J&aacute; que agora temos o valor da vari&aacute;vel </span><span class="c7">dir</span><span>, precisamos aplicar esse valor dentro da vari&aacute;vel </span><span class="c7">move </span><span class="c1">que &eacute; respons&aacute;vel agora por controlar a movimenta&ccedil;&atilde;o do personagem, mas utilizando apenas o eixo X:</span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 521.37px; height: 167.50px;"><img alt="" src="images/image1.png" style="width: 521.37px; height: 167.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span>Por fim aplicamos o valor de move dentro da fun&ccedil;&atilde;o </span><span class="c7">move_and_slide()</span><span class="c1">. Lembre-se que o primeiro valor da fun&ccedil;&atilde;o &eacute; o valor do movimento, e o segundo &eacute; a identifica&ccedil;&atilde;o do vetor do ch&atilde;o, ou seja, para onde o ch&atilde;o est&aacute; apontado:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 537.00px; height: 196.00px;"><img alt="" src="images/image3.png" style="width: 537.00px; height: 196.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span class="c1">Salve e teste a sua cena. Perceba que o personagem j&aacute; se move, mas ele n&atilde;o para. &nbsp;Para isso ser resolvido precisamos zerar a todo momento os valores de dire&ccedil;&atilde;o dessa forma:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 374.00px; height: 47.00px;"><img alt="" src="images/image11.png" style="width: 374.00px; height: 47.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span class="c1">Volte a testar e agora o personagem fica parado. Mas agora o que falta &eacute; implementarmos a gravidade ao Player e fazer com que ele pule.</span></p><p class="c2 c5"><span class="c1"></span></p><h2 class="c6" id="h.vsy49rl3o4kt"><span class="c0">Criando o Pulo</span></h2><p class="c2"><span class="c1">Vamos agora criar a gravidade para o Player. Para isso crie mais 2 vari&aacute;veis: uma para determinar a for&ccedil;a da gravidade e mais uma para determinar a for&ccedil;a do pulo:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 344.00px; height: 174.00px;"><img alt="" src="images/image6.png" style="width: 344.00px; height: 174.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span>Agora precisamos aplicar a for&ccedil;a da gravidade ao Player. Na fun&ccedil;&atilde;o </span><span class="c7">_physics_process </span><span>vamos fazer com que o eixo de dire&ccedil;&atilde;o Y da vari&aacute;vel </span><span class="c7">move </span><span class="c1">seja a todo momento aplicado a for&ccedil;a incrementando o seu valor:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 387.00px; height: 71.00px;"><img alt="" src="images/image5.png" style="width: 387.00px; height: 71.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span>Teste e j&aacute; perceba que o seu personagem come&ccedil;a a cair. Por &uacute;ltimo vamos fazer com que quando a tecla espa&ccedil;o for pressionada, a for&ccedil;a do pulo ser aplicada diretamente no eixo Y da vari&aacute;vel </span><span class="c7">move </span><span>com o valor da vari&aacute;vel </span><span class="c7">jumpForce</span><span class="c1">, j&aacute; que ela &eacute; respons&aacute;vel pela gravidade. Mas nesse caso a for&ccedil;a deve ser contr&aacute;ria a gravidade, ou seja, negativa:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 594.00px; height: 94.00px;"><img alt="" src="images/image7.png" style="width: 594.00px; height: 94.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span>Antes de continuar, &eacute; necess&aacute;rio que criemos uma cena com uma plataforma s&oacute;lida para realizarmos os testes. Para isso crie uma nova cena, e dentro dela insira um </span><span class="c7">Node2D </span><span>como ra&iacute;z, e depois um node </span><span class="c7">Texture Rect</span><span>. Na aba inspector, procure o atributo </span><span class="c7">Texture </span><span>e insira um sprite (pode ser o rosto do Godot). Por fim procure a op&ccedil;&atilde;o </span><span class="c7">Stretch Mode</span><span>&nbsp;e selecione a op&ccedil;&atilde;o </span><span class="c7">Tile</span><span class="c1">. Ela faz com que o objeto seja repetido in&uacute;meras vezes, o que facilita na hora de criar terrenos em 2D:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 290.67px;"><img alt="" src="images/image4.gif" style="width: 602.00px; height: 290.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span>Criado a plataforma, basta inserir agora um node </span><span class="c7">StaticBody2D </span><span>e dentro dele insira o </span><span class="c7">Texture Rect</span><span>&nbsp;e por &uacute;ltimo o </span><span class="c7">CollisionShape2D</span><span class="c1">&nbsp;para inserir um colisor na plataforma:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 261.33px;"><img alt="" src="images/image8.png" style="width: 602.00px; height: 261.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span class="c1">Agora salve e insira o personagem na cena e depois teste o pulo do personagem. Mas existe um problema: se voc&ecirc; apertar a tecla espa&ccedil;o v&aacute;rias vezes, o personagem n&atilde;o vai parar de pular. Para isso vamos fazer com que somente quando o personagem estiver no ch&atilde;o ele pule:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 76.00px;"><img alt="" src="images/image13.png" style="width: 602.00px; height: 76.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2"><span class="c1">Pronto! Assim o personagem j&aacute; pula e se move pelo cen&aacute;rio. Agora basta implementar o personagem em outras cenas quando necess&aacute;rio.</span></p><p class="c2 c5"><span class="c1"></span></p><p class="c2 c5"><span class="c1"></span></p></body></html>