<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_k1pwcgdprvy4-8>li:before{content:"-  "}ul.lst-kix_k1pwcgdprvy4-6{list-style-type:none}.lst-kix_k1pwcgdprvy4-3>li:before{content:"-  "}ul.lst-kix_k1pwcgdprvy4-5{list-style-type:none}ul.lst-kix_k1pwcgdprvy4-8{list-style-type:none}ul.lst-kix_k1pwcgdprvy4-7{list-style-type:none}ul.lst-kix_k1pwcgdprvy4-2{list-style-type:none}.lst-kix_k1pwcgdprvy4-1>li:before{content:"-  "}ul.lst-kix_k1pwcgdprvy4-1{list-style-type:none}.lst-kix_k1pwcgdprvy4-2>li:before{content:"-  "}ul.lst-kix_k1pwcgdprvy4-4{list-style-type:none}ul.lst-kix_k1pwcgdprvy4-3{list-style-type:none}.lst-kix_k1pwcgdprvy4-0>li:before{content:"-  "}.lst-kix_k1pwcgdprvy4-4>li:before{content:"-  "}ul.lst-kix_k1pwcgdprvy4-0{list-style-type:none}.lst-kix_k1pwcgdprvy4-5>li:before{content:"-  "}.lst-kix_k1pwcgdprvy4-6>li:before{content:"-  "}.lst-kix_k1pwcgdprvy4-7>li:before{content:"-  "}ol{margin:0;padding:0}table td,table th{padding:0}.c11{-webkit-text-decoration-skip:none;color:#000000;font-weight:400;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:20pt;font-family:"Arial";font-style:normal}.c9{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c2{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c1{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c8{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c12{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.c10{color:#000000;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c6{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c3{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c13{padding:0;margin:0}.c7{margin-left:36pt;padding-left:0pt}.c5{height:11pt}.c4{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c3"><h1 class="c12" id="h.lno6bdid7h6i"><span class="c11">Compendium - Movimento Plataforma 3D</span></h1><p class="c0"><span>Nesse arquivo voc&ecirc; vai aprender a como criar um personagem que se move estilo plataforma no Godot. Jogos desse g&ecirc;nero s&atilde;o conhecidos pela </span><span class="c4">c&acirc;mera no modo 2D</span><span>&nbsp;e pelo movimento do personagem que apenas </span><span class="c4">pula </span><span>e </span><span class="c4">anda para direita e esquerda.</span><span>&nbsp;Em alguns casos ele tamb&eacute;m pode se mover para </span><span class="c4">cima </span><span>e para </span><span class="c4">baixo </span><span class="c1">tamb&eacute;m.</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c6"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 538.50px; height: 302.91px;"><img alt="" src="images/image10.gif" style="width: 538.50px; height: 302.91px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">Vamos come&ccedil;ar criando o personagem, que ser&aacute; apenas uma c&aacute;psula no Godot. Na cena dele a estrutura geral ser&aacute;:</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c8">KinematicBody</span></p><ul class="c13 lst-kix_k1pwcgdprvy4-0 start"><li class="c0 c7"><span class="c8">MeshInstance</span></li><li class="c0 c7"><span class="c8">CollisionShape</span></li></ul><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 208.00px;"><img alt="" src="images/image1.png" style="width: 602.00px; height: 208.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>O node </span><span class="c4">KinematicBody </span><span>&eacute; ideal para movermos o personagem, pois a sua estrutura &eacute; feita para isso. O </span><span class="c4">MeshInstance </span><span>serve para adicionarmos uma malha em 3D dentro da cena, e por fim o </span><span class="c4">CollisionShape </span><span class="c1">serve para adicionar um colisor ao objeto.</span></p><p class="c0 c5"><span class="c1"></span></p><h2 class="c2" id="h.jl6xde5v6ow6"><span class="c4">Programando a Movimenta&ccedil;&atilde;o</span><span class="c9">&nbsp;</span></h2><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span>Depois salve a cena e crie um script no node raiz do Player </span><span class="c4">(N&atilde;o se esque&ccedil;a de renomear tamb&eacute;m seus nodes)</span><span class="c1">. Vamos primeiro programar os movimentos de andar para direita e esquerda. Primeiro precisamos de tr&ecirc;s vari&aacute;veis: uma vai guardar o vetor de dire&ccedil;&atilde;o do personagem, uma para o movimento e outra vai ser utilizada para controlar a velocidade:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 328.00px; height: 128.00px;"><img alt="" src="images/image7.png" style="width: 328.00px; height: 128.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span>Na fun&ccedil;&atilde;o </span><span class="c4">_physics_process(delta)</span><span class="c1">&nbsp;vamos utilizar as condi&ccedil;&otilde;es para comparar se apertarmos uma tecla, o personagem se mexe na dire&ccedil;&atilde;o em X utilizando a vari&aacute;vel de velocidade multiplicada por delta:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 531.00px; height: 131.00px;"><img alt="" src="images/image12.png" style="width: 531.00px; height: 131.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span>&nbsp;Lembre-se que o </span><span class="c4">delta </span><span class="c1">&eacute; o valor de tempo em milisegundos que o processador realiza todo o processo dentro do jogo. Ele &eacute; muito importante, pois faz com que todas as m&aacute;quinas que rodarem o programa tenham o mesmo tempo de execu&ccedil;&atilde;o.</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span>O personagem ainda n&atilde;o vai andar, pois precisamos aplicar o valor da vari&aacute;vel </span><span class="c4">dir </span><span class="c1">dentro </span></p><p class="c0"><span class="c1">da vari&aacute;vel de movimento:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 535.00px; height: 178.00px;"><img alt="" src="images/image8.png" style="width: 535.00px; height: 178.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span>Agora com o valor passado a vari&aacute;vel move, podemos aplicar o movimento dentro da fun&ccedil;&atilde;o </span><span class="c4">move_and_slide</span><span class="c1">. Lembre-se que o primeiro valor &nbsp;da fun&ccedil;&atilde;o &eacute; o valor do movimento, e o segundo &eacute; a identifica&ccedil;&atilde;o do vetor do ch&atilde;o, ou seja, para onde o ch&atilde;o est&aacute; apontado:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 547.00px; height: 204.00px;"><img alt="" src="images/image4.png" style="width: 547.00px; height: 204.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">Dessa maneira o personagem j&aacute; se move. Para testar, precisamos criar uma nova cena e dentro dela inserir uma c&acirc;mera,o Player e uma plataforma:</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 382.67px;"><img alt="" src="images/image3.png" style="width: 602.00px; height: 382.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span>Se voc&ecirc; testar o game vai notar que o player anda sozinho, e isso n&atilde;o pode acontecer. Para resolver esse problema, basta zerar a todo momento o valor de dire&ccedil;&atilde;o do objeto dentro da vari&aacute;vel </span><span class="c4">dir</span><span class="c1">:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 544.00px; height: 231.00px;"><img alt="" src="images/image11.png" style="width: 544.00px; height: 231.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><h2 class="c2" id="h.f3mhiodfnbzo"><span class="c4 c10">Criando o Pulo</span></h2><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">Agora o Player j&aacute; consegue se mover para as dire&ccedil;&otilde;es que queremos, mas precisamos tamb&eacute;m fazer com que ele pule. Ent&atilde;o vamos criar a gravidade inserindo duas vari&aacute;veis, que servir&atilde;o para armazenar o valor da gravidade, e outra para armazenar a for&ccedil;a do pulo do Player:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 333.00px; height: 177.00px;"><img alt="" src="images/image13.png" style="width: 333.00px; height: 177.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span>Agora, na fun&ccedil;&atilde;o </span><span class="c4">physics_process </span><span>vamos fazer com que a todo momento a gravidade seja aplicada ao Player, mas utilizando o eixo Y da vari&aacute;vel </span><span class="c4">move</span><span class="c1">:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 382.00px; height: 78.00px;"><img alt="" src="images/image6.png" style="width: 382.00px; height: 78.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span>Testando o projeto voc&ecirc; vai notar que o player est&aacute; atravessando a plataforma. Isso se deve ao fato que de que ela n&atilde;o possui um colisor s&oacute;lido. Para transformar a plataforma em s&oacute;lido, selecione o node da malha e clique na op&ccedil;&atilde;o </span><span class="c4">MESH &gt; CREATE TRIMESH STATIC BODY</span><span class="c1">.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 350.67px;"><img alt="" src="images/image2.gif" style="width: 602.00px; height: 350.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span>Agora o personagem consegue ficar em cima da plataforma. Por fim precisamos fazer apenas com que ele pule. No script, vamos programar para que quando uma tecla for pressionada, o Player pule utilizando o eixo Y da vari&aacute;vel </span><span class="c4">move </span><span>com</span><span>&nbsp;a vari&aacute;vel </span><span class="c4">jumpForce</span><span class="c1">:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 599.00px; height: 105.00px;"><img alt="" src="images/image9.png" style="width: 599.00px; height: 105.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span>Veja que quando voc&ecirc; testar, o pulo n&atilde;o vai sair perfeito. Se pressionarmos v&aacute;rias vezes a mesma tecla de pulo, o personagem ir&aacute; pular sem parar. Precisamos fazer com que </span><span class="c4">quando a tecla for pressionada</span><span>&nbsp;e o </span><span class="c4">personagem estiver tocando o ch&atilde;o</span><span class="c1">, ele pode pular:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 76.00px;"><img alt="" src="images/image5.png" style="width: 602.00px; height: 76.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span>Seu personagem at&eacute; aqui deve estar com toda a mec&acirc;nica de plataforma montada. Agora basta us&aacute;-lo nos seus projetos e o incrementar com novas funcionalidades.</span></p></body></html>